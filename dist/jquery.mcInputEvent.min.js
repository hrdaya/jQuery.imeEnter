/*!
 * jQuery.mcInputEvent v0.2.1 (http://hrdaya.github.io/jQuery.mcInputEvent/)
 *
 * Copyright 2015 yu-ki higa (https://github.com/hrdaya)
 * Licensed under MIT (https://github.com/hrdaya/jQuery.mcInputEvent/blob/master/LICENSE)
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";var b="mcInputEvent",c="mcinput",d=["blur."+b,"keyup."+b,"compositionstart."+b,"compositionend."+b],e=function(b){this.$elm=a(b),this.isComposition=!1,this.obj={lastVal:"",tagType:"html"};var c=this.$elm.prop("tagName").toLowerCase();("input"===c||"textarea"===c)&&(this.obj.tagType="input"),this.setLastVal()};e.prototype={on:function(){var a=this;a.off(),a.$elm.on("focus."+b,function(){a.setFocusEvents()})},off:function(){this.$elm.off("."+b),a(document).off("."+b)},destroy:function(){this.off(),this.$elm.removeData(b)},setFocusEvents:function(){var c=this;a(document).on("selectionchange."+b,function(){c.$elm.trigger("keyup")}),c.$elm.on(d.join(" "),function(a){switch(a.type){case"blur":c.removeFocusEvents();break;case"keyup":c.isComposition||c.fireEvent();break;case"compositionstart":c.isComposition=!0;break;case"compositionend":c.isComposition=!1,c.$elm.trigger("keyup")}}),c.$elm.trigger("keyup")},removeFocusEvents:function(){if(a(document).off("selectionchange."+b),this.$elm.off(d.join(" ")),"html"===this.obj.tagType){var c=this;setTimeout(function(){c.fireEvent()},100)}},fireEvent:function(){this.isSameVal()||(this.setLastVal(),this.$elm.trigger(a.Event(c,this.obj)))},isSameVal:function(){return"input"===this.obj.tagType?this.obj.lastVal===this.$elm.val():this.obj.lastVal===this.$elm.html()},setLastVal:function(){this.obj.lastVal="input"===this.obj.tagType?this.$elm.val():this.$elm.html()}},a.fn[b]=function(c){return"CompositionEvent"in window&&(c=c||"on",this.each(function(){var d=a.data(this,b)||a.data(this,b,new e(this));switch(c){case"on":case"off":case"destroy":case"fireEvent":d[c]()}})),this}});